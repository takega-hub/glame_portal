@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* GLAME Color Scheme */
  --foreground-rgb: 26, 26, 26; /* concrete-900 */
  --background-start-rgb: 248, 248, 248; /* concrete-50 */
  --background-end-rgb: 245, 245, 245; /* concrete-50 variant */
  --glame-gold: 212, 175, 55; /* gold-500 */
  --glame-concrete: 115, 115, 115; /* concrete-500 */
  --glame-metallic: 192, 192, 192; /* metallic-300 */
}

@media (prefers-color-scheme: dark) {
  :root {
    --foreground-rgb: 248, 248, 248; /* concrete-50 */
    --background-start-rgb: 26, 26, 26; /* concrete-900 */
    --background-end-rgb: 45, 45, 45; /* concrete-800 */
  }
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
      to bottom,
      transparent,
      rgb(var(--background-end-rgb))
    )
    rgb(var(--background-start-rgb));
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Универсальное правило: если фон темный (проверяем через CSS переменные) */
/* Если background-start-rgb темный (26, 26, 26 = concrete-900), текст светлый */
/* Это работает всегда, когда используется темный фон */
body {
  /* Если фон темный через переменные, цвет текста уже установлен через --foreground-rgb */
  /* Но добавим дополнительную защиту */
}

/* Дополнительное правило для случаев, когда фон темный, но медиа-запрос не сработал */
/* Проверяем, если background содержит темные значения */
body[style*="rgb(26"] *:not(.bg-white):not([class*="bg-white"]):not([class*="bg-gray-50"]):not([class*="bg-gray-100"]),
body[style*="rgb(45"] *:not(.bg-white):not([class*="bg-white"]):not([class*="bg-gray-50"]):not([class*="bg-gray-100"]) {
  color: #F8F8F8 !important;
}

/* Универсальное правило: если фон темный, текст должен быть светлым */
/* Проверяем через CSS переменные - если background-start-rgb темный (26, 26, 26), текст светлый */
@media (prefers-color-scheme: dark) {
  /* Базовый цвет текста на темном фоне */
  body {
    color: #F8F8F8 !important; /* concrete-50 - светлый текст */
  }
  
  /* Все текстовые элементы на темном фоне (кроме белых карточек) */
  body > *:not(.bg-white):not([class*="bg-white"]):not([class*="bg-gray-50"]):not([class*="bg-gray-100"]):not([class*="bg-red-50"]):not([class*="bg-green-50"]):not([class*="bg-blue-50"]):not([class*="bg-yellow-50"]) {
    color: #F8F8F8 !important;
  }
  
  /* Исключения - белые и светлые карточки должны иметь темный текст */
  .bg-white, [class*="bg-white"], [class*="bg-gray-50"], [class*="bg-gray-100"],
  [class*="bg-red-50"], [class*="bg-green-50"], [class*="bg-blue-50"], [class*="bg-yellow-50"] {
    color: #1A1A1A !important;
  }
  
  .bg-white *, [class*="bg-white"] *, [class*="bg-gray-50"] *, [class*="bg-gray-100"] *,
  [class*="bg-red-50"] *, [class*="bg-green-50"] *, [class*="bg-blue-50"] *, [class*="bg-yellow-50"] * {
    color: #1A1A1A !important;
  }
}

/* Улучшение видимости текста в полях ввода и выпадающих списках */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
textarea,
select {
  color: #111827; /* text-gray-900 */
}

input::placeholder,
textarea::placeholder {
  color: #9ca3af; /* text-gray-400 */
  opacity: 1;
}

/* Убеждаемся что текст в select виден */
select option {
  color: #111827; /* text-gray-900 */
  background-color: #ffffff;
}

/* Улучшение видимости текста в кнопках */
button {
  color: inherit;
}

/* shadcn/ui CSS variables */
@layer base {
  * {
    @apply border-gray-200;
  }
  
  body {
    @apply bg-white text-gray-950;
  }
  
  /* Если фон темный, текст светлый */
  @media (prefers-color-scheme: dark) {
    body {
      @apply text-gray-50;
    }
  }
}

:root {
  --background: 0 0% 100%;
  --foreground: 0 0% 10%;
  --card: 0 0% 100%;
  --card-foreground: 0 0% 10%;
  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 10%;
  --primary: 45 100% 51%;
  --primary-foreground: 0 0% 100%;
  --secondary: 0 0% 45%;
  --secondary-foreground: 0 0% 100%;
  --muted: 0 0% 96%;
  --muted-foreground: 0 0% 45%;
  --accent: 0 0% 96%;
  --accent-foreground: 0 0% 10%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border: 0 0% 90%;
  --input: 0 0% 90%;
  --ring: 45 100% 51%;
  --radius: 0.5rem;
}