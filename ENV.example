# ==========================
# GLAME AI Platform (env)
# ==========================
#
# Dev (local):
# - Backend runs on :8000
# - Frontend runs on :3000
# - infra/docker-compose.yml exposes Postgres on host :5433 (Windows-friendly)
#
# Prod (server):
# - Use infra/docker-compose.prod.yml (nginx on :80)
# - Postgres is NOT exposed to the Internet; data is stored in docker volumes
# - IMPORTANT: set OPENROUTER_API_KEY and JWT_SECRET_KEY

# ---------
# Backend
# ---------
DB_HOST=localhost
DB_PORT=5433
DB_USER=glame_user
DB_PASSWORD=glame_password
DB_NAME=glame_db
# Alternatively you can set full URL (connection.py will normalize driver):
# DATABASE_URL=postgresql://glame_user:glame_password@localhost:5433/glame_db

QDRANT_URL=http://localhost:6333
REDIS_URL=redis://localhost:6379

OPENROUTER_API_KEY=
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# OpenAI API (опционально, для embeddings и vision models)
OPENAI_API_KEY=

# Embedding model (если не указан, используется из OPENAI_API_KEY или OPENROUTER_API_KEY)
EMBEDDING_MODEL=

# Fashion Trends API (опционально, используется LLM fallback если не указан)
FASHION_TRENDS_API_KEY=
FASHION_TRENDS_API_URL=https://api.fashiontrends.com/v1

# Try-On API для визуальной примерки (опционально, используется fallback если не указан)
TRY_ON_API_KEY=
TRY_ON_API_URL=https://api.replicate.com/v1

# Генерация изображений образов (опционально)
# Можно использовать OpenRouter API (использует OPENROUTER_API_KEY) или Replicate
IMAGE_GENERATION_API_KEY=
IMAGE_GENERATION_API_URL=https://openrouter.ai/api/v1
IMAGE_GENERATION_MODEL=black-forest-labs/flux-pro
# Альтернатива: Replicate API для генерации изображений
REPLICATE_API_TOKEN=

# Типовая модель GLAME для визуализации образов (если фото не загружено)
GLAME_DEFAULT_MODEL_URL=/static/default_glame_model.jpg

# Хранилище изображений
STORAGE_TYPE=local
# Для S3 (если STORAGE_TYPE=s3):
# S3_BUCKET_NAME=
# S3_ACCESS_KEY=
# S3_SECRET_KEY=

JWT_SECRET_KEY=change-me-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

ENVIRONMENT=development
LOG_LEVEL=INFO

# ---------
# 1С УНФ ФРЕШ OData API
# ---------
# URL OData сервиса 1С
ONEC_API_URL=https://msk1.1cfresh.com/a/sbm/3322419/odata/standard.odata
# Токен в формате base64 для Basic Auth (логин:пароль)
ONEC_API_TOKEN=b2RhdGEudXNlcjpvcGV4b2JvZQ==
# Endpoint для получения данных о продажах
ONEC_SALES_ENDPOINT=/AccumulationRegister_Продажи_RecordType
# Endpoint для дисконтных карт
ONEC_DISCOUNT_CARDS_ENDPOINT=/Catalog_ДисконтныеКарты
# Endpoint для контрагентов/покупателей
ONEC_CUSTOMERS_ENDPOINT=/Catalog_Контрагенты
# Endpoint для каталога номенклатуры (товары)
ONEC_PRODUCTS_ENDPOINT=/Catalog_Номенклатура
# Endpoint для складов (магазины)
# Внимание: каталог складов может быть недоступен в некоторых версиях 1С
# Если получаете 404, попробуйте альтернативные названия: /Catalog_Stores, /InformationRegister_Склады
ONEC_STORES_ENDPOINT=/Catalog_Склады
# Endpoint для остатков по складам (регистр остатков, если доступен)
ONEC_STOCKS_ENDPOINT=/AccumulationRegister_ТоварыНаСкладах
# Таймауты подключения к 1С (в секундах)
# ONEC_CONNECT_TIMEOUT=60.0  # Таймаут установки соединения (по умолчанию 60)
# ONEC_READ_TIMEOUT=300.0    # Таймаут чтения данных (по умолчанию 300)

# Настройки синхронизации покупателей
CUSTOMER_SYNC_LOAD_ALL=true      # Загружать всех покупателей (true) или ограниченное количество (false)
CUSTOMER_SYNC_BATCH_SIZE=1000    # Размер батча для пагинации (рекомендуется 1000)
CUSTOMER_SYNC_CARDS_LIMIT=1000   # Максимальное количество карт (если LOAD_ALL=false)
CUSTOMER_SYNC_PURCHASE_DAYS=365  # Количество дней истории покупок для синхронизации

# Ночная синхронизация остатков
STOCKS_SYNC_NIGHTLY_ENABLED=true
STOCKS_SYNC_NIGHTLY_HOUR=2
STOCKS_SYNC_NIGHTLY_MINUTE=0

# ---------
# Frontend
# ---------
# In production we use same-origin /api via nginx; keep empty.
# In local dev you can set it to http://localhost:8000 (optional).
NEXT_PUBLIC_API_URL=

