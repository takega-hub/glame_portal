# Как использовать Content Agent

## Быстрый старт

### 1. Запуск приложения

Убедитесь, что backend и frontend запущены:

```bash
# Backend (в одном терминале)
cd backend
.\start_backend.bat

# Frontend (в другом терминале)
cd frontend
npm run dev
```

### 2. Открытие интерфейса

Откройте в браузере:
```
http://localhost:3000/content-generator
```

## Использование интерфейса

### Шаг 1: Заполнение параметров

**Обязательные параметры:**
- **Канал коммуникации** - выберите из списка (например, "Главная страница сайта", "Instagram")

**Опциональные параметры:**
- **Персона** - опишите целевую аудиторию (можно использовать быстрые шаблоны)
- **Этап Customer Journey Map** - выберите этап:
  - Осведомленность (awareness)
  - Рассмотрение (consideration)
  - Покупка (purchase)
  - Удержание (retention)
- **Цель контента** - опишите цель (можно использовать быстрые шаблоны)

### Шаг 2: Генерация контента

Нажмите кнопку **"Сгенерировать контент"** и дождитесь результата.

### Шаг 3: Работа с результатом

После генерации вы можете:

1. **Просмотреть контент** - он отобразится в текстовом поле
2. **Скопировать** - нажмите кнопку "Копировать" для копирования в буфер обмена
3. **Экспортировать** - сохраните в файл:
   - **TXT** - простой текстовый файл
   - **JSON** - файл с полной информацией (контент + метаданные)

### Шаг 4: История генераций

Все сгенерированные контенты сохраняются в истории (последние 10). Вы можете:
- Просмотреть предыдущие генерации
- Скопировать любой из них
- Использовать как шаблон для новых генераций

## Примеры использования

### Пример 1: Контент для главной страницы

**Параметры:**
- Канал: Главная страница сайта
- Персона: Молодая женщина 25-35 лет, любит стильные украшения
- Этап CJM: Осведомленность
- Цель: Познакомить с брендом GLAME

**Результат:** Контент для знакомства с брендом, подходящий для главной страницы.

### Пример 2: Пост для Instagram

**Параметры:**
- Канал: Instagram
- Персона: Активная женщина 20-30 лет, следит за трендами
- Этап CJM: Рассмотрение
- Цель: Мотивировать к покупке

**Результат:** Яркий, вдохновляющий контент для Instagram поста.

### Пример 3: Email рассылка

**Параметры:**
- Канал: Email рассылка
- Персона: Постоянный клиент, покупает регулярно
- Этап CJM: Удержание
- Цель: Предложить новые коллекции

**Результат:** Персонализированный контент для email рассылки постоянным клиентам.

## Использование через API

Если вы хотите использовать Content Agent программно:

### JavaScript/TypeScript

```typescript
import { api } from '@/lib/api';

const result = await api.generateContent({
  persona: 'Молодая женщина 25-35 лет',
  cjm_stage: 'awareness',
  channel: 'website_main',
  goal: 'Познакомить с брендом'
});

console.log(result.content);
```

### Python

```python
import requests

response = requests.post(
    'http://localhost:8000/api/content/generate',
    json={
        'persona': 'Молодая женщина 25-35 лет',
        'cjm_stage': 'awareness',
        'channel': 'website_main',
        'goal': 'Познакомить с брендом'
    }
)

result = response.json()
print(result['content'])
```

### cURL

```bash
curl -X POST http://localhost:8000/api/content/generate \
  -H "Content-Type: application/json" \
  -d '{
    "persona": "Молодая женщина 25-35 лет",
    "cjm_stage": "awareness",
    "channel": "website_main",
    "goal": "Познакомить с брендом"
  }'
```

## Советы по использованию

1. **Более точные результаты:**
   - Указывайте детальную персону
   - Выбирайте подходящий этап CJM
   - Четко формулируйте цель

2. **Использование шаблонов:**
   - Используйте быстрые шаблоны для персон и целей
   - Модифицируйте шаблоны под свои нужды

3. **Экспериментируйте:**
   - Пробуйте разные комбинации параметров
   - Сохраняйте лучшие результаты в истории
   - Используйте историю для создания вариаций

4. **Оптимизация для каналов:**
   - Instagram - короткий, яркий контент с эмодзи
   - Email - более формальный, структурированный контент
   - Главная страница - вдохновляющий, информативный контент

## Troubleshooting

### Ошибка: "Backend недоступен"
- Убедитесь, что backend запущен на порту 8000
- Проверьте: `http://localhost:8000/health`

### Ошибка: "Error generating content"
- Проверьте логи backend
- Убедитесь, что OPENROUTER_API_KEY настроен
- Проверьте подключение к Qdrant

### Контент не соответствует ожиданиям
- Попробуйте более детально описать персону и цель
- Убедитесь, что база знаний о бренде загружена в Qdrant
- Экспериментируйте с разными параметрами

## Дополнительные ресурсы

- [CONTENT_AGENT_GUIDE.md](CONTENT_AGENT_GUIDE.md) - Подробное руководство по запуску
- [CONTENT_AGENT_INTEGRATION.md](CONTENT_AGENT_INTEGRATION.md) - Варианты интеграции
- [BRAND_KNOWLEDGE.md](BRAND_KNOWLEDGE.md) - Информация о базе знаний бренда
