# Структура платформы GLAME AI

## Обзор

GLAME AI Platform - это комплексная AI-платформа для бренда GLAME, включающая несколько модулей для работы с клиентами, контентом и аналитикой.

## Архитектура

```
GLAME AI Platform
├── Frontend (Next.js)
│   ├── Страницы пользователей
│   ├── Админ-панель (будущее)
│   └── API клиент
├── Backend (FastAPI)
│   ├── API Endpoints
│   ├── AI Agents
│   ├── Сервисы
│   └── Модели данных
└── Инфраструктура
    ├── PostgreSQL (БД)
    ├── Qdrant (Векторная БД)
    └── Redis (Кэш)
```

## Структура Frontend

### Страницы (Routes)

#### 1. `/` - AI Stylist (Главная)
**Компонент:** `ChatInterface`
**Описание:** Диалоговый интерфейс с AI стилистом для подбора образов и украшений
**Функционал:**
- Чат с AI стилистом
- Быстрые действия (Quick Actions)
- Отображение рекомендованных образов
- Отображение товаров в образах
- История диалога (localStorage)

**Статус:** ✅ Реализовано

#### 2. `/content-generator` - Генератор контента
**Компонент:** `ContentGenerator`
**Описание:** Генерация контента для различных каналов коммуникации
**Функционал:**
- Форма с параметрами генерации
- Быстрые шаблоны для персон и целей
- Генерация контента через API
- Копирование и экспорт результатов
- История генераций

**Статус:** ✅ Реализовано

#### 3. `/products` - Каталог товаров
**Компонент:** `ProductsPage`
**Описание:** Просмотр и управление каталогом товаров
**Планируемый функционал:**
- Список товаров с фильтрацией
- Детальная страница товара
- Поиск по каталогу
- Фильтры (категория, бренд, цена, теги)
- Синхронизация с 1С

**Статус:** ⏳ Заглушка (ожидает синхронизации с 1С)

#### 4. `/looks` - Образы
**Компонент:** `LooksPage`
**Описание:** Просмотр готовых образов и стилистических решений
**Планируемый функционал:**
- Галерея образов
- Фильтры по стилю и настроению
- Детальная страница образа
- Создание образов через AI Stylist

**Статус:** ⏳ Заглушка (ожидает интеграции с AI Stylist)

#### 5. `/analytics` - Аналитика
**Компонент:** `AnalyticsPage`
**Описание:** Панель аналитики взаимодействий пользователей
**Планируемый функционал:**
- Дашборд с метриками
- Графики событий пользователей
- Метрики конверсии
- Анализ по персонам и CJM этапам
- Экспорт отчетов

**Статус:** ⏳ Заглушка (API готов, UI в разработке)

### Компоненты

#### Layout компоненты
- `Navigation` - Навигационное меню (✅ Реализовано)

#### Chat компоненты
- `ChatInterface` - Интерфейс чата с AI стилистом (✅ Реализовано)

#### Content компоненты
- `ContentGenerator` - Генератор контента (✅ Реализовано)

#### Product компоненты
- `ProductCard` - Карточка товара (✅ Реализовано)

#### Look компоненты
- `LookCard` - Карточка образа (✅ Реализовано)

### Библиотеки

#### API Client (`lib/api.ts`)
- `chatWithStylist()` - Чат с AI стилистом
- `generateContent()` - Генерация контента
- `getProducts()` - Получение товаров
- `getLooks()` - Получение образов
- `getStylistHistory()` - История диалога

## Структура Backend

### API Endpoints

#### `/api/stylist/*`
- `POST /api/stylist/chat` - Чат с AI стилистом
- `GET /api/stylist/history/{session_id}` - История диалога

**Статус:** ✅ Реализовано

#### `/api/content/*`
- `POST /api/content/generate` - Генерация контента

**Статус:** ✅ Реализовано

#### `/api/products/*`
- `GET /api/products` - Список товаров
- `GET /api/products/{id}` - Детали товара
- `POST /api/products` - Создание товара
- `PUT /api/products/{id}` - Обновление товара
- `DELETE /api/products/{id}` - Удаление товара

**Статус:** ✅ Реализовано

#### `/api/looks/*`
- `GET /api/looks` - Список образов
- `GET /api/looks/{id}` - Детали образа
- `POST /api/looks` - Создание образа
- `PUT /api/looks/{id}` - Обновление образа
- `DELETE /api/looks/{id}` - Удаление образа

**Статус:** ✅ Реализовано

#### `/api/analytics/*`
- `POST /api/analytics/track` - Отправка события аналитики
- `GET /api/analytics/stats` - Статистика (планируется)

**Статус:** ✅ API готов

#### `/api/knowledge/*`
- `POST /api/knowledge/upload` - Загрузка знаний о бренде
- `POST /api/knowledge/upload/file` - Загрузка из файла
- `GET /api/knowledge/stats` - Статистика базы знаний

**Статус:** ✅ Реализовано

#### `/api/1c/sync/*`
- `POST /api/1c/sync/api` - Синхронизация из REST API 1С
- `POST /api/1c/sync/file` - Синхронизация из файла
- `GET /api/1c/sync/status` - Статус синхронизации

**Статус:** ✅ Реализовано

### AI Agents

#### `BaseAgent`
Базовый класс для всех AI агентов
- Подключение к LLM (OpenRouter)
- Работа с векторной БД (Qdrant)
- Кэширование (Redis)

**Статус:** ✅ Реализовано

#### `StylistAgent`
AI агент для подбора образов и украшений
- Анализ запроса пользователя
- Определение персоны и CJM этапа
- Подбор товаров и образов
- Генерация рекомендаций

**Статус:** ⚠️ Упрощенная версия (без БД)

#### `ContentAgent`
AI агент для генерации контента
- Генерация контента на основе персоны
- Учет этапа CJM
- Адаптация под канал коммуникации
- Использование базы знаний о бренде

**Статус:** ✅ Реализовано

### Сервисы

#### `LLMService`
Сервис для работы с языковыми моделями
- Интеграция с OpenRouter
- Управление промптами
- Обработка ответов

**Статус:** ✅ Реализовано

#### `VectorService`
Сервис для работы с векторной БД
- Создание embeddings
- Поиск по базе знаний
- Управление коллекциями

**Статус:** ✅ Реализовано

#### `OneCSyncService`
Сервис синхронизации с 1С
- Загрузка товаров из 1С
- Обновление каталога
- Обработка изменений

**Статус:** ✅ Реализовано

#### `AnalyticsService`
Сервис аналитики
- Сохранение событий
- Агрегация метрик
- Генерация отчетов

**Статус:** ✅ Реализовано

### Модели данных

#### `User`
Модель пользователя
- ID, email, имя
- Предпочтения
- История взаимодействий

**Статус:** ✅ Реализовано

#### `Product`
Модель товара
- ID, название, бренд, цена
- Категория, теги, описание
- Изображения
- Поля синхронизации с 1С

**Статус:** ✅ Реализовано

#### `Look`
Модель образа
- ID, название
- Список товаров
- Стиль, настроение
- Описание, изображение

**Статус:** ✅ Реализовано

#### `Session`
Модель сессии диалога
- ID сессии
- История сообщений
- Персона, CJM этап
- Метаданные

**Статус:** ✅ Реализовано

#### `AnalyticsEvent`
Модель события аналитики
- Тип события
- Данные события
- Временная метка
- Метаданные пользователя

**Статус:** ✅ Реализовано

## Инфраструктура

### Базы данных

#### PostgreSQL
Основная реляционная БД
- Хранение пользователей
- Хранение товаров и образов
- Хранение сессий
- Хранение событий аналитики

**Статус:** ✅ Настроено

#### Qdrant
Векторная БД для базы знаний
- Хранение embeddings знаний о бренде
- Семантический поиск
- Контекст для AI агентов

**Статус:** ✅ Настроено

#### Redis
Кэш для оптимизации
- Кэширование ответов LLM
- Кэширование поисковых запросов
- Сессии пользователей

**Статус:** ✅ Настроено

### Docker Compose

Все сервисы запускаются через Docker Compose:
- PostgreSQL
- Qdrant
- Redis

**Статус:** ✅ Настроено

## Навигация

### Главное меню

1. **AI Stylist** (`/`) - Чат с AI стилистом
2. **Генератор контента** (`/content-generator`) - Генерация контента
3. **Каталог товаров** (`/products`) - Просмотр товаров
4. **Образы** (`/looks`) - Просмотр образов
5. **Аналитика** (`/analytics`) - Панель аналитики

**Статус:** ✅ Реализовано

## Планируемые функции

### Краткосрочные (1-2 недели)

1. ✅ Навигация между страницами
2. ⏳ Полноценная интеграция Stylist Agent с БД
3. ⏳ Загрузка базы знаний о бренде
4. ⏳ Страница каталога товаров с данными
5. ⏳ Страница образов с данными

### Среднесрочные (1-2 месяца)

1. ⏳ Аутентификация пользователей
2. ⏳ Профили пользователей
3. ⏳ Панель аналитики с графиками
4. ⏳ Админ-панель
5. ⏳ Интеграция Content Agent в чат

### Долгосрочные (3+ месяца)

1. ⏳ A/B тестирование контента
2. ⏳ Персонализированные рекомендации
3. ⏳ Интеграция с внешними системами
4. ⏳ Мобильное приложение
5. ⏳ Расширенная аналитика и ML модели

## Документация

- [QUICK_START.md](QUICK_START.md) - Быстрый старт
- [CONTENT_AGENT_GUIDE.md](CONTENT_AGENT_GUIDE.md) - Руководство по Content Agent
- [CONTENT_AGENT_INTEGRATION.md](CONTENT_AGENT_INTEGRATION.md) - Интеграция Content Agent
- [CONTENT_AGENT_USAGE.md](CONTENT_AGENT_USAGE.md) - Использование Content Agent
- [1C_INTEGRATION.md](1C_INTEGRATION.md) - Интеграция с 1С
- [BRAND_KNOWLEDGE.md](BRAND_KNOWLEDGE.md) - База знаний о бренде
- [NEXT_STEPS.md](NEXT_STEPS.md) - План дальнейшей работы

## Технологический стек

### Frontend
- Next.js 14
- React 18
- TypeScript
- Tailwind CSS
- Axios

### Backend
- FastAPI
- Python 3.12
- SQLAlchemy
- Alembic (миграции)

### AI/ML
- OpenRouter (LLM)
- Qdrant (векторная БД)
- Embeddings для семантического поиска

### Базы данных
- PostgreSQL
- Qdrant
- Redis

### Инфраструктура
- Docker
- Docker Compose
- Nginx (планируется)
